/*! rally-jquery-tools v1.2.8 */
!function(a){function b(a){var b=a.offset();return{top:b.top+a.height()/2,left:b.left+a.width()/2}}var c=a.tools.overlay,d=a(window);a.extend(c.conf,{start:{top:null,left:null},fadeInSpeed:"fast",zIndex:9999});var e=function(c,e){var f=this.getOverlay(),g=this.getConf(),h=this.getTrigger(),i=this,j=f.outerWidth({margin:!0}),k=f.data("img"),l=g.fixed?"fixed":"absolute";if(!k){var m=f.css("backgroundImage");if(!m)throw"background-image CSS property not set for overlay";m=m.slice(m.indexOf("(")+1,m.indexOf(")")).replace(/\"/g,""),f.css("backgroundImage","none"),k=a('<img src="'+m+'"/>'),k.css({border:0,display:"none"}).width(j),a("body").append(k),f.data("img",k)}var n=g.start.top||Math.round(d.height()/2),o=g.start.left||Math.round(d.width()/2);if(h){var p=b(h);n=p.top,o=p.left}g.fixed?(n-=d.scrollTop(),o-=d.scrollLeft()):(c.top+=d.scrollTop(),c.left+=d.scrollLeft()),k.css({position:"absolute",top:n,left:o,width:0,zIndex:g.zIndex}).show(),c.position=l,f.css(c),k.animate({top:c.top,left:c.left,width:j},g.speed,function(){f.css("zIndex",g.zIndex+1).fadeIn(g.fadeInSpeed,function(){i.isOpened()&&!a(this).index(f)?e.call():f.hide()})}).css("position",l)},f=function(c){var e=this.getOverlay().hide(),f=this.getConf(),g=this.getTrigger(),h=e.data("img"),i={top:f.start.top,left:f.start.left,width:0};g&&a.extend(i,b(g)),f.fixed&&h.css({position:"absolute"}).animate({top:"+="+d.scrollTop(),left:"+="+d.scrollLeft()},0),h.animate(i,f.closeSpeed,c)};c.addEffect("apple",e,f)}(jQuery);