/*! rally-jquery-tools v1.2.8 */
!function(a){function b(b,c,d){c=a(c).first()||c;var e=b.offset().top,f=b.offset().left,g=d.position.split(/,?\s+/),h=g[0],i=g[1];e-=c.outerHeight()-d.offset[0],f+=b.outerWidth()+d.offset[1],/iPad/i.test(navigator.userAgent)&&(e-=a(window).scrollTop());var j=c.outerHeight()+b.outerHeight();"center"==h&&(e+=j/2),"bottom"==h&&(e+=j);var k=b.outerWidth();return"center"==i&&(f-=(k+c.outerWidth())/2),"left"==i&&(f-=k),{top:e,left:f}}function c(a){function b(){return this.getAttribute("type")==a}return b.key='[type="'+a+'"]',b}function d(c,d,f){function g(b,c,d){if(f.grouped||!b.length){var g;if(!1===d||a.isArray(d)){g=e.messages[c.key||c]||e.messages["*"],g=g[f.lang]||e.messages["*"].en;var h=g.match(/\$\d/g);h&&a.isArray(d)&&a.each(h,function(a){g=g.replace(this,d[a])})}else g=d[f.lang]||d;b.push(g)}}var i=this,j=d.add(i);c=c.not(":button, :image, :reset, :submit"),d.attr("novalidate","novalidate"),a.extend(i,{getConf:function(){return f},getForm:function(){return d},getInputs:function(){return c},reflow:function(){return c.each(function(){var c=a(this),d=c.data("msg.el");if(d){var e=b(c,d,f);d.css({top:e.top,left:e.left})}}),i},invalidate:function(b,d){if(!d){var e=[];a.each(b,function(a,b){var d=c.filter("[name='"+a+"']");d.length&&(d.trigger("OI",[b]),e.push({input:d,messages:[b]}))}),b=e,d=a.Event()}return d.type="onFail",j.trigger(d,[b]),d.isDefaultPrevented()||l[f.effect][0].call(i,b,d),i},reset:function(b){return b=b||c,b.removeClass(f.errorClass).each(function(){var b=a(this).data("msg.el");b&&(b.remove(),a(this).data("msg.el",null))}).off(f.errorInputEvent+".v"||""),i},destroy:function(){return d.off(f.formEvent+".V reset.V"),c.off(f.inputEvent+".V change.V"),i.reset()},checkValidity:function(b,d){b=b||c,b=b.not(":disabled");var e={};if(b=b.filter(function(){var b=a(this).attr("name");if(!e[b])return e[b]=!0,a(this)}),!b.length)return!0;if(d=d||a.Event(),d.type="onBeforeValidate",j.trigger(d,[b]),d.isDefaultPrevented())return d.result;var m=[];b.each(function(){var b=[],c=a(this).data("messages",b),e=h&&c.is(":date")?"onHide.v":f.errorInputEvent+".v";if(c.off(e),a.each(k,function(){var a=this,e=a[0];if(c.filter(e).length){var h=a[1].call(i,c,c.val());if(!0!==h){if(d.type="onBeforeFail",j.trigger(d,[c,e]),d.isDefaultPrevented())return!1;var k=c.attr(f.messageAttr);if(k)return b=[k],!1;g(b,e,h)}}}),b.length&&(m.push({input:c,messages:b}),c.trigger("OI",[b]),f.errorInputEvent&&c.on(e,function(a){i.checkValidity(c,a)})),f.singleError&&m.length)return!1});var n=l[f.effect];if(!n)throw'Validator: cannot find effect "'+f.effect+'"';return m.length?(i.invalidate(m,d),!1):(n[1].call(i,b,d),d.type="onSuccess",j.trigger(d,[b]),b.off(f.errorInputEvent+".v"),!0)}}),a.each("onBeforeValidate,onBeforeFail,onFail,onSuccess".split(","),function(b,c){a.isFunction(f[c])&&a(i).on(c,f[c]),i[c]=function(b){return b&&a(i).on(c,b),i}}),f.formEvent&&d.on(f.formEvent+".V",function(a){if(!i.checkValidity(null,a))return a.preventDefault();a.target=d,a.type=f.formEvent}),d.on("reset.V",function(){i.reset()}),c[0]&&c[0].validity&&c.each(function(){this.oninvalid=function(){return!1}}),d[0]&&(d[0].checkValidity=i.checkValidity),f.inputEvent&&c.on(f.inputEvent+".V",function(b){i.checkValidity(a(this),b)}),c.filter(":checkbox, select").filter("[required]").on("change.V",function(b){var c=a(this);(this.checked||c.is("select")&&a(this).val())&&l[f.effect][1].call(i,c,b)}),c.filter(":radio[required]").on("change.V",function(b){var c=a("[name='"+a(b.srcElement).attr("name")+"']");null!=c&&0!=c.length&&i.checkValidity(c,b)}),a(window).resize(function(){i.reflow()})}a.tools=a.tools||{version:"@VERSION"};var e,f=/\[type=([a-z]+)\]/,g=/^-?[0-9]*(\.[0-9]+)?$/,h=a.tools.dateinput,i=/^([a-z0-9_\.\-\+]+)@([\da-z\.\-]+)\.([a-z\.]{2,6})$/i,j=/^(https?:\/\/)?[\da-z\.\-]+\.[a-z\.]{2,6}[#&+_\?\/\w \.\-=]*$/i;e=a.tools.validator={conf:{grouped:!1,effect:"default",errorClass:"invalid",inputEvent:null,errorInputEvent:"keyup",formEvent:"submit",lang:"en",message:"<div/>",messageAttr:"data-message",messageClass:"error",offset:[0,0],position:"center right",singleError:!1,speed:"normal"},messages:{"*":{en:"Please correct this value"}},localize:function(b,c){a.each(c,function(a,c){e.messages[a]=e.messages[a]||{},e.messages[a][b]=c})},localizeFn:function(b,c){e.messages[b]=e.messages[b]||{},a.extend(e.messages[b],c)},fn:function(b,d,e){a.isFunction(d)?e=d:("string"==typeof d&&(d={en:d}),this.messages[b.key||b]=d);var g=f.exec(b);g&&(b=c(g[1])),k.push([b,e])},addEffect:function(a,b,c){l[a]=[b,c]}};var k=[],l={default:[function(c){var d=this.getConf();a.each(c,function(c,e){var f=e.input;f.addClass(d.errorClass);var g=f.data("msg.el");g||(g=a(d.message).addClass(d.messageClass).appendTo(document.body),f.data("msg.el",g)),g.css({visibility:"hidden"}).find("p").remove(),a.each(e.messages,function(b,c){a("<p/>").html(c).appendTo(g)}),g.outerWidth()==g.parent().width()&&g.add(g.find("p")).css({display:"inline"});var h=b(f,g,d);g.css({visibility:"visible",position:"absolute",top:h.top,left:h.left}).fadeIn(d.speed)})},function(b){var c=this.getConf();b.removeClass(c.errorClass).each(function(){var b=a(this).data("msg.el");b&&b.css({visibility:"hidden"})})}]};a.each("email,url,number".split(","),function(b,c){a.expr[":"][c]=function(a){return a.getAttribute("type")===c}}),a.fn.oninvalid=function(a){return this[a?"on":"trigger"]("OI",a)},e.fn(":email","Please enter a valid email address",function(a,b){return!b||i.test(b)}),e.fn(":url","Please enter a valid URL",function(a,b){return!b||j.test(b)}),e.fn(":number","Please enter a numeric value.",function(a,b){return g.test(b)}),e.fn("[max]","Please enter a value no larger than $1",function(a,b){if(""===b||h&&a.is(":date"))return!0;var c=a.attr("max");return parseFloat(b)<=parseFloat(c)||[c]}),e.fn("[min]","Please enter a value of at least $1",function(a,b){if(""===b||h&&a.is(":date"))return!0;var c=a.attr("min");return parseFloat(b)>=parseFloat(c)||[c]}),e.fn("[required]","Please complete this mandatory field.",function(a,b){return a.is(":checkbox")?a.is(":checked"):!!b}),e.fn("[pattern]",function(a,b){return""===b||new RegExp("^"+a.attr("pattern")+"$").test(b)}),e.fn(":radio","Please select an option.",function(b){var c=!1;a("[name='"+b.attr("name")+"']").each(function(b,d){a(d).is(":checked")&&(c=!0)});return!!c}),a.fn.validator=function(b){var c=this.data("validator");return c&&(c.destroy(),this.removeData("validator")),b=a.extend(!0,{},e.conf,b),this.is("form")?this.each(function(){var e=a(this);c=new d(e.find(":input"),e,b),e.data("validator",c)}):(c=new d(this,this.eq(0).closest("form"),b),this.data("validator",c))}}(jQuery);